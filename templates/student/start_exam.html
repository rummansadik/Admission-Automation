{% extends 'student/studentbase.html' %}
{% block content %}
{% load static %}

<head>
  <link href="//netdna.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
  <script src="//netdna.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
  <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
  <style>
    .jumbotron {
      margin-bottom: 0px !important;
      height: 318px;
    }
  </style>
</head>


<div class="container">

  <div class="row">
    <div class="col-8">
      <form class="form" autocomplete="off" onsubmit="saveAns()" action="/student/calculate-marks" method="POST">
        {% csrf_token %}
        <h2 style="text-align: center;">Course Name: {{course.course_name}}</h2> <hr>

        {% for q in questions %}
        <div class="row">
          <div class="col-md-8">
            <h3 class="text-danger">{{ forloop.counter }}. {{q.question}}</h3>
          </div>
          <div class="col">
            <h4 style="text-align: right;">[{{q.marks}} Marks]</h4>
          </div>
        </div>

        <input type="hidden" name="csrfmiddlewaretoken"
          value="C24rUotmdHawVQJL3KrqiWxvti8UffOFYUc8TRbZtLt36AVLdP3jbkzUVe3beRAa">

        <div class="form-check mx-4">
          <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{q.option1}}" value="Option_1_{{ forloop.counter }}">
          <label class="form-check-label" for="option_1_{{ forloop.counter }}">
            {{q.option1}}
          </label>
        </div>


        <div class="form-check mx-4">
          <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{q.option2}}" value="Option_2_{{ forloop.counter }}">
          <label class="form-check-label" for="option_2_{{ forloop.counter }}">
            {{q.option2}}
          </label>
        </div>


        <div class="form-check mx-4">
          <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{q.option3}}" value="Option_3_{{ forloop.counter }}">
          <label class="form-check-label" for="option_3_{{ forloop.counter }}">
            {{q.option3}}
          </label>
        </div>


        <div class="form-check mx-4">
          <input class="form-check-input" type="radio" name="{{ forloop.counter }}" id="{{q.option4}}" value="Option_4_{{ forloop.counter }}">
          <label class="form-check-label" for="option_4_{{ forloop.counter }}">
            {{q.option4}}
          </label>
        </div>

        <br> <hr>
        {% endfor %}


        {% for q in shorts %}
        <div class="row">
          <div class="col-md-8">
            <h3 class="text-danger">{{ questions.count|add:forloop.counter }}. {{q.question}}</h3>
          </div>
          <div class="col">
            <h4 style="text-align: right;">[{{q.marks}} Marks]</h4>
          </div>
        </div>

        
        <textarea 
          placeholder="Write your answer here..."
          name="question{{ forloop.counter }}" 
          id="question{{ forloop.counter }}" 
          cols="50" rows="1"
        ></textarea>
        <br><br> <hr>
        {% endfor %}

        <input class="btn btn-success btn-lg" style="border-radius: 0%;" type="submit" value="Submit Answers">
      </form>
    </div>
    <div class="col w-25 h-25 d-inline-block">
      <img style="width: 400px; text-size-adjust: auto;" src="{% url 'video-feed' %}">
    </div>
  </div>
</div>

<script>
  function saveAns() {
    var ele = document.getElementsByTagName('input');
    for (var i = 0; i < ele.length; i++) {
      if (ele[i].type == "radio") {
        if (ele[i].checked) {
          setCookie(ele[i].name, ele[i].value);
        }
      }
    }
  }

  function setCookie(cname, cvalue) {
    var d = new Date();
    d.setTime(d.getTime() + (5 * 60 * 1000));
    var expires = "expires=" + d.toUTCString();
    document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
  }
</script>

<!-- <script>
  document.addEventListener("visibilitychange", function () {
    window.location.href = "{% url 'student-exam' %}"
  });
</script> -->

{% endblock content %}